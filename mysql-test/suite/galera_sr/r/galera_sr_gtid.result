CREATE TABLE t1 (f1 INT PRIMARY KEY);
SET SESSION wsrep_trx_fragment_size=1;
INSERT INTO t1 VALUES (1);
SELECT COUNT(*) = 1 FROM t1;
COUNT(*) = 1
1
SET SESSION wsrep_trx_fragment_size=1;
UPDATE t1 SET f1 = 2;
SET SESSION wsrep_trx_fragment_size=0;
SET SESSION wsrep_trx_fragment_size=0;
SELECT COUNT(*) = 1 FROM t1 WHERE f1 = 2;
COUNT(*) = 1
1
gtid_executed_equal
1
SHOW BINLOG EVENTS IN 'mysqld-bin.000002' FROM 120;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
mysqld-bin.000002	<Pos>	Previous_gtids	1	<End_log_pos>	<GTID>:1-2
mysqld-bin.000002	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:3'
mysqld-bin.000002	<Pos>	Query	1	<End_log_pos>	use `test`; CREATE TABLE t1 (f1 INT PRIMARY KEY)
mysqld-bin.000002	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:4'
mysqld-bin.000002	<Pos>	Query	1	<End_log_pos>	BEGIN
mysqld-bin.000002	<Pos>	Ignorable	1	<End_log_pos>	# Unrecognized ignorable event
mysqld-bin.000002	<Pos>	Query	1	<End_log_pos>	COMMIT
mysqld-bin.000002	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:5'
mysqld-bin.000002	<Pos>	Query	1	<End_log_pos>	BEGIN
mysqld-bin.000002	<Pos>	Table_map	1	<End_log_pos>	table_id: ### (test.t1)
mysqld-bin.000002	<Pos>	Write_rows	1	<End_log_pos>	table_id: ### flags: STMT_END_F
mysqld-bin.000002	<Pos>	Xid	1	<End_log_pos>	COMMIT /* xid=### */
mysqld-bin.000002	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:6'
mysqld-bin.000002	<Pos>	Query	1	<End_log_pos>	BEGIN
mysqld-bin.000002	<Pos>	Ignorable	1	<End_log_pos>	# Unrecognized ignorable event
mysqld-bin.000002	<Pos>	Query	1	<End_log_pos>	COMMIT
mysqld-bin.000002	<Pos>	Gtid	2	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:7'
mysqld-bin.000002	<Pos>	Query	2	<End_log_pos>	BEGIN
mysqld-bin.000002	<Pos>	Table_map	2	<End_log_pos>	table_id: ### (test.t1)
mysqld-bin.000002	<Pos>	Update_rows	2	<End_log_pos>	table_id: ### flags: STMT_END_F
mysqld-bin.000002	<Pos>	Xid	2	<End_log_pos>	COMMIT /* xid=### */
SELECT 1 FROM DUAL;
1
1
SHOW BINLOG EVENTS IN 'mysqld-bin.000003' FROM 120;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
mysqld-bin.000003	<Pos>	Previous_gtids	2	<End_log_pos>	<GTID>:1-2
mysqld-bin.000003	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:3'
mysqld-bin.000003	<Pos>	Query	1	<End_log_pos>	use `test`; CREATE TABLE t1 (f1 INT PRIMARY KEY)
mysqld-bin.000003	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:4'
mysqld-bin.000003	<Pos>	Query	1	<End_log_pos>	BEGIN
mysqld-bin.000003	<Pos>	Ignorable	1	<End_log_pos>	# Unrecognized ignorable event
mysqld-bin.000003	<Pos>	Query	1	<End_log_pos>	COMMIT
mysqld-bin.000003	<Pos>	Gtid	1	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:5'
mysqld-bin.000003	<Pos>	Query	1	<End_log_pos>	BEGIN
mysqld-bin.000003	<Pos>	Table_map	1	<End_log_pos>	table_id: ### (test.t1)
mysqld-bin.000003	<Pos>	Write_rows	1	<End_log_pos>	table_id: ### flags: STMT_END_F
mysqld-bin.000003	<Pos>	Xid	1	<End_log_pos>	COMMIT /* xid=### */
mysqld-bin.000003	<Pos>	Gtid	2	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:6'
mysqld-bin.000003	<Pos>	Query	2	<End_log_pos>	BEGIN
mysqld-bin.000003	<Pos>	Ignorable	2	<End_log_pos>	# Unrecognized ignorable event
mysqld-bin.000003	<Pos>	Query	2	<End_log_pos>	COMMIT
mysqld-bin.000003	<Pos>	Gtid	2	<End_log_pos>	SET @@SESSION.GTID_NEXT= '<GTID>:7'
mysqld-bin.000003	<Pos>	Query	2	<End_log_pos>	BEGIN
mysqld-bin.000003	<Pos>	Table_map	2	<End_log_pos>	table_id: ### (test.t1)
mysqld-bin.000003	<Pos>	Update_rows	2	<End_log_pos>	table_id: ### flags: STMT_END_F
mysqld-bin.000003	<Pos>	Xid	2	<End_log_pos>	COMMIT /* xid=### */
DROP TABLE t1;
