CREATE TABLE t1 (f1 INTEGER) Engine=InnoDB;
<<<<<<< HEAD
connection node_1;
||||||| merged common ancestors
=======
INSERT INTO t1 values(0);
>>>>>>> 10.1
SET GLOBAL wsrep_slave_threads = 10;
SET GLOBAL wsrep_slave_threads = 1;
<<<<<<< HEAD
connection node_2;
INSERT INTO t1 VALUES (1);
connection node_1;
||||||| merged common ancestors
INSERT INTO t1 VALUES (1);
=======
# Wait 10 slave threads to start 1
# Generate 12 replication events
SELECT COUNT(*) FROM t1;
COUNT(*)
13
# Wait 9 slave threads to exit 1
>>>>>>> 10.1
SET GLOBAL wsrep_slave_threads = 10;
# Wait 10 slave threads to start 2
SET GLOBAL wsrep_slave_threads = 20;
# Wait 20 slave threads to start 3
SET GLOBAL wsrep_slave_threads = 1;
<<<<<<< HEAD
connection node_2;
INSERT INTO t1 VALUES (1);
INSERT INTO t1 VALUES (2);
INSERT INTO t1 VALUES (3);
INSERT INTO t1 VALUES (4);
INSERT INTO t1 VALUES (5);
INSERT INTO t1 VALUES (6);
INSERT INTO t1 VALUES (7);
INSERT INTO t1 VALUES (8);
INSERT INTO t1 VALUES (9);
connection node_1;
||||||| merged common ancestors
INSERT INTO t1 VALUES (1);
INSERT INTO t1 VALUES (2);
INSERT INTO t1 VALUES (3);
INSERT INTO t1 VALUES (4);
INSERT INTO t1 VALUES (5);
INSERT INTO t1 VALUES (6);
INSERT INTO t1 VALUES (7);
INSERT INTO t1 VALUES (8);
INSERT INTO t1 VALUES (9);
=======
# Generate 40 replication events
SELECT COUNT(*) FROM t1;
COUNT(*)
53
# Wait 10 slave threads to exit 3
>>>>>>> 10.1
SET GLOBAL wsrep_slave_threads = 10;
SET GLOBAL wsrep_slave_threads = 0;
Warnings:
Warning	1292	Truncated incorrect wsrep_slave_threads value: '0'
<<<<<<< HEAD
connection node_2;
INSERT INTO t1 VALUES (10);
INSERT INTO t1 VALUES (11);
INSERT INTO t1 VALUES (12);
INSERT INTO t1 VALUES (13);
INSERT INTO t1 VALUES (14);
INSERT INTO t1 VALUES (15);
INSERT INTO t1 VALUES (16);
INSERT INTO t1 VALUES (17);
INSERT INTO t1 VALUES (18);
INSERT INTO t1 VALUES (19);
INSERT INTO t1 VALUES (20);
connection node_1;
SET GLOBAL wsrep_slave_threads = 1;
||||||| merged common ancestors
INSERT INTO t1 VALUES (10);
INSERT INTO t1 VALUES (11);
INSERT INTO t1 VALUES (12);
INSERT INTO t1 VALUES (13);
INSERT INTO t1 VALUES (14);
INSERT INTO t1 VALUES (15);
INSERT INTO t1 VALUES (16);
INSERT INTO t1 VALUES (17);
INSERT INTO t1 VALUES (18);
INSERT INTO t1 VALUES (19);
INSERT INTO t1 VALUES (20);
SET GLOBAL wsrep_slave_threads = 1;
=======
# Wait 10 slave threads to start 3
# Generate 12 replication events
SELECT COUNT(*) FROM t1;
COUNT(*)
65
# Wait 10 slave threads to exit 4
>>>>>>> 10.1
DROP TABLE t1;
